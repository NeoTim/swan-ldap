<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title> SWAN: Stuff We All Need - LDAP Client | Unosquare SWAN LDAP Client </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content=" SWAN: Stuff We All Need - LDAP Client | Unosquare SWAN LDAP Client ">
    <meta name="generator" content="docfx 2.43.3.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="logo" src="best-practices/resources/images/unosquare_logo.svg" alt="Unosquare">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar">
          <div class="container-fluid hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container-fluid body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p><a href="https://ci.appveyor.com/project/geoperez/swan-ldap"><img src="https://ci.appveyor.com/api/projects/status/nc6u1j5rhv5qinev?svg=true" alt="Build status"></a>
<a href="https://travis-ci.org/unosquare/swan-ldap"><img src="https://travis-ci.org/unosquare/swan-ldap.svg?branch=master" alt="Build Status"></a></p>
<h1 id="img-srchttpsgithubcomunosquareswan-ldaprawmasterswan-logo-32pngimg-swan-stuff-we-all-need---ldap-client"><img src="https://github.com/unosquare/swan-ldap/raw/master/swan-logo-32.png"> SWAN: Stuff We All Need - LDAP Client</h1>
<p><strong>SWAN LDAP Client</strong> was previously included as part of the main SWAN project, but since there is not too much products using an LDAP Client we removed as standalone library.</p>
<p><em><span class="emoji" shortcode="star">⭐</span> Please star this project if you find it useful!</em></p>
<p>SWAN stands for Stuff We All Need</p>
<p>Repeating code and reinventing the wheel is generally considered bad practice. At <a href="https://www.unosquare.com">Unosquare</a> we are committed to beautiful code and great software. Swan is a collection of classes and extension methods that we (and other good developers) have written and evolved over the years. We found ourselves copying and pasting the same code for every project every time we started them. We decided to kill that cycle once and for all. This is the result of that idea. Our philosophy is that Swan should have no external dependencies, it should be cross-platform, and it should be useful.</p>
<h2 id="installation">Installation:</h2>
<p><a href="https://badge.fury.io/nu/Unosquare.Swan.Ldap"><img src="https://badge.fury.io/nu/Unosquare.Swan.Ldap.svg" alt="NuGet version"></a></p>
<pre><code>PM&gt; Install-Package Unosquare.Swan.Ldap
</code></pre><h2 id="the-ldapconnection-class">The <code>LDAPConnection</code> class</h2>
<p>The <strong>Lightweight Directory Access Protocol</strong> or LDAP is a network protocol for querying and modifying items in directory service providers like <a href="https://en.wikipedia.org/wiki/Active_Directory">Active Directory</a> which provide a systematic set of records organized in a hierarchical structure. Active Directory stores information about users, computers, groups and other objects that are part of a <code>domain</code>.</p>
<p><a href="https://unosquare.github.io/swan/api/Unosquare.Swan.Networking.Ldap.LdapConnection.html">LdapConnection API Doc</a></p>
<h4 id="operations">Operations</h4>
<p>LDAP has a couple of operations that can be executed</p>
<ul>
<li><strong>Bind</strong>: binds the current connection to a set of  credentials</li>
<li><strong>Unbind or Disconnect</strong>: signals the server that the connection is about to close then the server proceeds to close the connection to the client</li>
<li><strong>Modify</strong>: this operation is used by LDAP clients to request a change to be performed to the already existing database. This operation is used in combination with one of following :<ul>
<li><strong>Add</strong>: inserts a new entry into the directory </li>
<li><strong>Delete</strong>: deletes an entry from the directory<ul>
<li><strong>Replace</strong>: modifies an existing property value</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="example-1-connecting-to-a-ldap-server">Example 1: Connecting to a LDAP Server</h4>
<p>A connection to a LDAP server is a two-step process, first we <code>connect</code> to a server but that connection is unauthenticated so we need to bind it to a set of credentials. The reason for breaking down the connection process into a two-step action allows us to reset the authorization state using the same connection. </p>
<pre><code class="lang-csharp"> // Create a  LdapConnection variable
 var connection = new LdapConnection();

 // Connect to a server with a deafult port 
 await connection.Connect(&quot;ldap.forumsys.com&quot;, 389);

 // Set up the credentials 
 await connection.Bind(&quot;cn=read-only-admin,dc=example,dc=com&quot;, &quot;password&quot;);
</code></pre><h4 id="example-2-reading-all-the-properties-of-an-entry">Example 2: Reading all the properties of an entry</h4>
<p>After establishing a connection you can use the connection&#39;s Read method to retrieve all properties of an entry</p>
<pre><code class="lang-csharp">// Get all properties of &#39;tesla&#39;
 var properties = await connection.Read(&quot;uid=tesla,dc=example,dc=com&quot;);

 // After getting all properties from an entry select its email and print it
 properties.GetAttribute(&quot;mail&quot;).StringValue.Info();
</code></pre><h4 id="example-3-searching-entries">Example 3: Searching entries</h4>
<p> There are three scopes for searching entries :</p>
<ol>
<li><strong>ScopeBase</strong>: searches only at the base dn</li>
<li><strong>ScopeOne</strong>: searches all entries one level under the specified dn</li>
<li><strong>ScopeSub</strong>: as mentioned above this allows to search entries at all levels</li>
</ol>
<pre><code class="lang-csharp">// Retrieve all entries that have the specified email using ScopeSub 
// which searches all entries at all levels under and including the specified base DN
var searchResult = await connection.Search(&quot;dc=example,dc=com&quot;,LdapConnection.ScopeSub,&quot;(cn=Isaac Newton)&quot;);

// If there are more entries remaining
  while (searchResult.HasMore())
  {
      // Point to the next entry
      var entry = searchResult.Next();

      // Get all attributes 
      var entryAttributes = entry.GetAttributeSet();

      // Select its email and print it
      entryAttributes.GetAttribute(&quot;cn&quot;).StringValue.Info();
  }
</code></pre><h4 id="example-4-modifying-an-entry-attribute">Example 4: Modifying an entry attribute</h4>
<p>An easy way to deal with attributes modification is by calling the Modify method with a <code>LdapModificationOp</code> such as:</p>
<ul>
<li><strong>Replace</strong>: overrides an attribute value. <ul>
<li>If the attribute does not exist it creates a new one</li>
<li>If no value is passed the entire attribute is deleted</li>
</ul>
</li>
<li><strong>Delete</strong> : deletes a value from an attribute.<ul>
<li>If no values are listed or if all of them are the entire attribute is removed</li>
</ul>
</li>
<li><p><strong>Add</strong>: adds a new value to an attribute </p>
<ul>
<li><p>If the attribute does not exist a new one is created</p>
<pre><code class="lang-csharp">// Modify Tesla and sets its email as tesla@email.com
connection.Modify(&quot;uid=tesla,dc=example,dc=com&quot;, 
new[] { new LdapModification(LdapModificationOp.Replace, &quot;mail&quot;, &quot;tesla@email.com&quot;) });

// Deletes the listed values from the given attribute
connection.Modify(&quot;uid=tesla,dc=example,dc=com&quot;, 
new[] { new LdapModification(LdapModificationOp.Delete, &quot;mail&quot;, &quot;tesla@email.com&quot;) });
</code></pre></li>
</ul>
<p>// Add back the recently deleted property
connection.Modify(&quot;uid=tesla,dc=example,dc=com&quot;, 
  new[] { new LdapModification(LdapModificationOp.Add, &quot;mail&quot;, &quot;tesla@email.com&quot;) });</p>
</li>
</ul>
<p> // disconnect from the LDAP server
 connection.Disconnect();</p>
<pre><code>
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="doc" align="center">
              <span class="small mobile-hide">
                <img id="logo" class="doc-logo" src="swan-logo-256.png" alt="">
              </span>
            </div>
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li class="top-sep">
                    <a href="https://github.com/unosquare/swan-ldap/blob/dependabot/nuget/Microsoft.CodeAnalysis.FxCopAnalyzers-2.9.4/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2017-2019 <a href="https://www.unosquare.com">Unosquare</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-8535255-2', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
